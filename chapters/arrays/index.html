<!DOCTYPE html>
<html>
    <head>
        <title>Arrays &mdash; PHP Introduction &mdash; A short introduction to PHP web development</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://xmartin.github.io/php-introduction//components/foundation/css/foundation.min.css" rel="stylesheet" type="text/css" />
        <link href="https://xmartin.github.io/php-introduction//components/highlightjs/styles/default.css" rel="stylesheet" type="text/css" />
        <link href="https://xmartin.github.io/php-introduction//css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <link rel="stylesheet" href="https://xmartin.github.io/php-introduction//components/highlightjs/styles/github.css" />
                                    </head>
    <body>
        <div class="off-canvas-wrap" data-offcanvas>
            <div class="inner-wrap">
                <nav class="tab-bar">
                                    <section class="left-small">
                    <a class="left-off-canvas-toggle menu-icon" href="#"><span></span></a>
                </section>
                <section class="middle tab-bar-section">
                    <h1 class="title">Arrays &mdash; PHP Introduction</h1>
                </section>
                </nav>
                            <aside class="left-off-canvas-menu">
                <ul class="off-canvas-list">
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/intro/">Intro</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/installation/">Installing PHP</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/basic_syntax/">Basic Syntax</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/a_web_application/">A Web Application</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/objects_and_classes/">Objects and Classes</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/a_real_application/">A Real Application</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/builtin_functions_and_classes/">Built-in Functions and Classes</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/arrays/">Arrays</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/type_juggling/">Type Juggling and Comparisons</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/more_on_functions/">More On Functions</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/inheritance/">Inheritance</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/namespaces_and_autoloading/">Namespaces and Autoloading</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/all_of_it/">All Of It</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/where_to_go_from_here/">Where To Go From Here</a>
    </li>
</ul>
            </aside>

            <section class="main-section">
                <div class="row">
                    <div class="small-12 columns">
                                                                                                                                            
<div class="row">
    <div class="small-4 columns text-left">
                    <a href="https://xmartin.github.io/php-introduction/chapters/builtin_functions_and_classes/">Previous</a>
            </div>
    <div class="small-4 columns text-center">
        <a href="https://xmartin.github.io/php-introduction/">Index</a>
    </div>
    <div class="small-4 columns text-right">
                    <a href="https://xmartin.github.io/php-introduction/chapters/type_juggling/">Next</a>
            </div>
</div>
                        <hr>
                    </div>
                </div>
                <div class="row">
                    <div class="small-12 columns">
                        <p>By now we've seen them a few times and already did some useful things with them: Arrays.</p>

<p><code>array</code> is one of PHP's core types, certainly it's most commonly used data structure and also one of it's major problems. The thing is, PHP arrays aren't arrays at all.</p>

<p>What exactly is an array? It's a data structure that represents a sequence of values of the same type, it preserves the order of its values and has a fixed length. PHP arrays don't guarantee any of that.</p>

<p>PHP array are more like hash maps in other languages. They have a set of "keys" which can be strings or integers and each key has a value associated with it. If all keys are integers and are consecutive numbers, PHP arrays behave similar to real arrays, except that their size is not fixed. But if the keys are out of order, or some keys are strings, PHP arrays behave more like hash maps.</p>

<p>If you construct an array only with it's values, it becomes a numerically indexed array. All keys will be integers and will start with <code>0</code>.</p>

<pre><code class="php">$arr = [1, 2, 3, 4];
var_dump($arr);
/* prints:
array(4) {
  [0]=&gt;
  int(1)
  [1]=&gt;
  int(2)
  [2]=&gt;
  int(3)
  [3]=&gt;
  int(4)
}
</code></pre>

<p>However, we can also explicitly tell PHP what keys to use:</p>

<pre><code>$arr = [
  3 =&gt; 1,
  "2" =&gt; 2,
  0 =&gt; 3,
  "1" =&gt; 4,
  "a" =&gt; 5
];

var_dump($arr);
/* prints:
array(5) {
  [3]=&gt;
  int(1)
  [2]=&gt;
  int(2)
  [0]=&gt;
  int(3)
  [1]=&gt;
  int(4)
  ["a"]=&gt;
  int(5)
}
*/
</code></pre>

<p>Now, the array has the same values but the keys are no longer in ascending order. Also note, how PHP has converted some keys into integers although we specified two of them as strings. PHP will try to convert any array key into an integer. Only if that conversion does not work, it will leave it as a string as it did with the <code>"a"</code> key.</p>

<p>We will talk about this implicit conversion of types <a href="https://xmartin.github.io/php-introduction/chapters/type_juggling">in the next chapter</a> by the way.</p>

<p>To summarize, an array in PHP is an ordered sequence of elements, each which has a key and a value. The key can be either an <code>int</code> or a <code>string</code> and the value can be of an any type. The order of the sequence does NOT depend on the keys.</p>

<p>The PHP manual page about arrays states the following right at the beginning:</p>

<blockquote>
  <p>An array in PHP is actually an ordered map.</p>
</blockquote>

<p>This is the closest thing to a precise name I could find for this data structure. Sometimes PHP arrays are also called "associative arrays" but I think "ordered map" better describes what is going on.</p>

<h2 id="the-internal-array-pointer">The internal array pointer</h2>

<p>Every PHP <code>array</code> has an internal cursor that points to the "current element" of the sequence. This is called the "internal array pointer". There are functions that work with this pointer and/or change its position.</p>

<pre><code class="php"><br />$arr = [
  'a' =&gt; 1,
  'b' =&gt; 2,
  'c' =&gt; 3,
  'd' =&gt; 4
];

//current() returns the value at the internal pointer's position
echo current($arr) . PHP_EOL; //prints "1";

// next() moves the internal pointer forward one element and then does the same as current()
echo next($arr) . PHP_EOL; //prints "2"
echo next($arr) . PHP_EOL; //prints "3"
echo next($arr) . PHP_EOL; //prints "4"
echo current($arr) . PHP_EOL; //prints "4"

//key() returns the key at the internal pointer's position
echo key($arr) . PHP_EOL; //prints "d"

//reset() puts the internal pointer back at the first element
reset($arr);

echo current($arr) . PHP_EOL; //prints "1"

</code></pre>

<p>Functions like <a href="http://php.net/manual/en/function.current.php"><code>current()</code></a>, <a href="http://php.net/manual/en/function.next.php"><code>next()</code></a>, <a href="http://php.net/manual/en/function.reset.php"><code>reset()</code></a>, <a href="http://php.net/manual/en/function.key.php"><code>key()</code></a> and <a href="http://php.net/manual/en/function.end.php"><code>end()</code></a> are useful when dealing with arrays, especially, if their length is not known. But keep in mind how the internal pointer position changes as you use them.</p>

<h2 id="iteration-over-arrays">Iteration over arrays</h2>

<p>One of the most common things you'll do with arrays is to iterate over them, executing a piece of code with each of the array's elements. The basic way to do that is the <code>foreach</code> construct:</p>

<pre><code class="php"><br />$arr = [1, 2, 3, 4];

foreach ($arr as $value) {
  echo $value . PHP_EOL;
}

/* prints:
1
2
3
4
*/

</code></pre>

<p>You can also get the key and the value while iterating:</p>

<pre><code class="php"><br />$arr = [
  'a' =&gt; 1,
  'b' =&gt; 2,
  'c' =&gt; 3,
  'd' =&gt; 4
];

foreach ($arr as $key =&gt; $value) {
  echo $key . ': ' . $value . PHP_EOL;
}

/* prints:
a: 1
b: 2
c: 3
d: 4
*/
</code></pre>

<p>When using <code>foreach</code>, keep in mind that it changes the internal pointer's position. So use <code>reset()</code> after <code>foreach</code>, if you want to use functions like <code>current()</code> or <code>next()</code> after iterating. <code>foreach</code> itself always resets the pointer before starting the iteration so you can use it without manually resetting the array.</p>

<h1 id="real%2C-actual-arrays">Real, actual arrays</h1>

<p>We talked about how an <code>array</code> in PHP is not actually an array data structure at all. It's a weird hybrid of various data structures and sometimes behaves unexpectedly. However, there is <a href="http://php.net/manual/en/class.splfixedarray.php"><code>SplFixedArray</code></a> which implements an actual array similar to other dynamic languages like Ruby or Python.</p>

<p>It has a fixed length and keys may only be integers. It still allows the values to be of multiple different types but that's a property that most dynamic languages share.</p>

<p>The main benefits of this class are the much more predictable behavior and speed. PHP's implementation of <code>SplFixedArray</code> is much faster than the one for <code>array</code>.</p>

<p>You can construct an <code>SplFixedArray</code> from an <code>array</code>:</p>

<pre><code class="php">$arr = SplFixedArray::fromArray([1, 2, 3, 4]);
</code></pre>

<p>Or you can create one with a specific length that has <code>null</code> as values:</p>

<pre><code class="php">$arr = new SplFixedArray(4);
</code></pre>

<p><code>SplFixedArray</code> works with PHP's built in array function and also with <code>foreach</code>:</p>

<pre><code class="php">$arr = SplFixedArray::fromArray([1, 2, 3, 4]);

echo current($arr) . PHP_EOL; //prints "1"
echo next($arr) . PHP_EOL; //prints "2"
echo current($arr) . PHP_EOL; //prints "2"
echo end($arr) . PHP_EOL; //prints "4"

foreach ($arr as $value) {
  echo $value . PHP_EOL;
}

/* prints:
1
2
3
4
*/

reset($arr);

echo current($arr) . PHP_EOL; //prints "1"
</code></pre>

<p>If you need to represent a sequence of values in your program, use <code>SplFixedArray</code>. It might seem more complicated but in fact is safer, faster and will cause you less trouble when you're debugging your code.</p>

<p>There are more data structures in PHP that provide better access to features of <code>array</code>. One of them is <a href="http://php.net/manual/en/class.splobjectstorage.php">SplOjectStorage</a>. Its use cases are a bit beyond the scope of this tutorial but you should read the manual pages about it.</p>
                    </div>

                </div>
                <div class="row">
                    <div class="small-12 columns">
                        <hr>
                                                                                                                                            
<div class="row">
    <div class="small-4 columns text-left">
                    <a href="https://xmartin.github.io/php-introduction/chapters/builtin_functions_and_classes/">Previous</a>
            </div>
    <div class="small-4 columns text-center">
        <a href="https://xmartin.github.io/php-introduction/">Index</a>
    </div>
    <div class="small-4 columns text-right">
                    <a href="https://xmartin.github.io/php-introduction/chapters/type_juggling/">Next</a>
            </div>
</div>
                    </div>
                </div>
            </section>

                <div class="row">
                    <div class="small-12 columns">
                        <footer class="main-footer">
                            <nav><ul class="inline-list">
                                    <li><a href="http://www.lnwdr.de">Author: Leon Weidauer</a></li>
                                    <li>
                                        <a href="https://www.github.com/berlinonline/php-introduction">PHP Introduction on Github</a>
                                    </li>
                                    <li>
                                        <a href="http://www.berlinonline.net">BerlinOnline Stadtportal GmbH & Co. KG</a>
                                    </li>
                            </ul></nav>
                        </footer>
                </div>
                <a class="exit-off-canvas"></a>
            </div>
        </div>

                <script src="https://xmartin.github.io/php-introduction//components/jquery/jquery.min.js"></script>
        <script src="https://xmartin.github.io/php-introduction//components/foundation/js/foundation.min.js"></script>
        <script>
            $(document).foundation();
        </script>
        <script src="https://xmartin.github.io/php-introduction//components/highlightjs/highlight.pack.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
            </body>
</html>

