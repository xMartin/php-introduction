<!DOCTYPE html>
<html>
    <head>
        <title>Namespaces and Autoloading &mdash; PHP Introduction &mdash; A short introduction to PHP web development</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://xmartin.github.io/php-introduction//components/foundation/css/foundation.min.css" rel="stylesheet" type="text/css" />
        <link href="https://xmartin.github.io/php-introduction//components/highlightjs/styles/default.css" rel="stylesheet" type="text/css" />
        <link href="https://xmartin.github.io/php-introduction//css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <link rel="stylesheet" href="https://xmartin.github.io/php-introduction//components/highlightjs/styles/github.css" />
                                    </head>
    <body>
        <div class="off-canvas-wrap" data-offcanvas>
            <div class="inner-wrap">
                <nav class="tab-bar">
                                    <section class="left-small">
                    <a class="left-off-canvas-toggle menu-icon" href="#"><span></span></a>
                </section>
                <section class="middle tab-bar-section">
                    <h1 class="title">Namespaces and Autoloading &mdash; PHP Introduction</h1>
                </section>
                </nav>
                            <aside class="left-off-canvas-menu">
                <ul class="off-canvas-list">
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/intro/">Intro</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/installation/">Installing PHP</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/basic_syntax/">Basic Syntax</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/a_web_application/">A Web Application</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/objects_and_classes/">Objects and Classes</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/a_real_application/">A Real Application</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/builtin_functions_and_classes/">Built-in Functions and Classes</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/arrays/">Arrays</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/type_juggling/">Type Juggling and Comparisons</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/more_on_functions/">More On Functions</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/inheritance/">Inheritance</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/namespaces_and_autoloading/">Namespaces and Autoloading</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/all_of_it/">All Of It</a>
    </li>
    <li>
        <a href="https://xmartin.github.io/php-introduction/chapters/where_to_go_from_here/">Where To Go From Here</a>
    </li>
</ul>
            </aside>

            <section class="main-section">
                <div class="row">
                    <div class="small-12 columns">
                                                                                                                                            
<div class="row">
    <div class="small-4 columns text-left">
                    <a href="https://xmartin.github.io/php-introduction/chapters/inheritance/">Previous</a>
            </div>
    <div class="small-4 columns text-center">
        <a href="https://xmartin.github.io/php-introduction/">Index</a>
    </div>
    <div class="small-4 columns text-right">
                    <a href="https://xmartin.github.io/php-introduction/chapters/all_of_it/">Next</a>
            </div>
</div>
                        <hr>
                    </div>
                </div>
                <div class="row">
                    <div class="small-12 columns">
                        <p>There's more to a programming language than just the syntax and semantics of the language itself. There's usually also a built-in library for the most common tasks and often countless third-party libraries that you can build upon. We already covered most of PHP's language core and some of the <a href="https://xmartin.github.io/php-introduction/chapters/builtin_functions_and_classes">included library of functions and classes</a>.</p>

<p>In the past, adding more libraries to your PHP project involved copying their code into your project and keeping track of everything yourself but those days are over! Now there's <a href="https://getcomposer.org">Composer</a> which we already used to install the Silex framework in our previous examples.</p>

<p>Composer not only manages your dependencies for your, it also gives you an easy way to make your own code available throughout your project. It's common practice now to have a <code>src</code> directory that contains all actual source code files of your application. Further, you should put every class in its own file, named like the class with <code>.php</code> at the end. Now this is where namespaces come in.</p>

<h2 id="namespaces">Namespaces</h2>

<p>So far our classes and function have all been floating around in our applications, available by just their names. In a complex project this can quickly become a problem, especially, if you have multiple classes that do similar things and have similar names. It can also lead to name collisions with third party code from libraries. Imagine you have a class called <code>Address</code> and some library also has a class with that name. How should PHP know which one to use?</p>

<p>To avoid name collision and to organize our code better, we can put classes and functions into namespaces:</p>

<pre><code class="php">&lt;?php
//file name: src/MyProject/Foo/Derp.php

namespace "MyProject\Foo";

class Derp
{
  //...
}
</code></pre>

<p>Namespaces are kind of like directories for your code and they usually directly map to actual file directories, like this <code>MyProject\Foo\Derp</code> class that lives inside the file <code>src/MyProject/Foo/Derp.php</code>. Even the syntax is similar, namespaces just use a <code>\</code> as a separator instead of <code>/</code>.</p>

<p>Namespaces apply to the entire PHP file that contains the <code>namespace</code> declaration. All code in that file now is located in the <code>MyProject\Foo</code> namespace.</p>

<p>Notice that there's no <code>src</code> namespace although we have a <code>src</code> directory. That's because the <code>src</code> directory contains the "global" namespace, the top level of all namespaces. Well, it doesn't yet, but Composer will fix that for us. For every project, we should have a <code>composer.json</code> file. Composer can help us create it with <code>composer init</code>:</p>

<pre><code>Package name (&lt;vendor&gt;/&lt;name&gt;) [lnwdr/my-project]:
Description []:
Author [Leon Weidauer &lt;leon@lnwdr.de&gt;]:
Minimum Stability []:
License []:

Define your dependencies.

Would you like to define your dependencies (require) interactively [yes]? no
Would you like to define your dev dependencies (require-dev) interactively [yes]? no

{
    "name": "lnwdr/my-project",
    "authors": [
        {
            "name": "Leon Weidauer",
            "email": "leon@lnwdr.de"
        }
    ],
    "require": {}
}

Do you confirm generation [yes]? yes
</code></pre>

<p>For a basic project you can leave most of the questions unanswered or use the default answers. Now, let's see what's inside <code>composer.json</code>:</p>

<pre><code class="json">{
    "name": "lnwdr/my-project",
    "authors": [
        {
            "name": "Leon Weidauer",
            "email": "leon@lnwdr.de"
        }
    ],
    "require": {}
}
</code></pre>

<h3 id="autoloading">Autoloading</h3>

<p>The easiest way to make our <code>src</code> directory known to Composer as "the place for everything" is to add this "autoload" section to <code>composer.json</code>:</p>

<pre><code class="json">{
    "name": "lnwdr/my-project",
    "authors": [
        {
            "name": "Leon Weidauer",
            "email": "leon@lnwdr.de"
        }
    ],
    "require": {},
    "autoload": {
        "psr-4": { "": "src/" }
    }
}
</code></pre>

<p>This tells Composer to use the <code>src</code> directory to find all classes that it doesn't already know using the <a href="http://www.php-fig.org/psr/psr-4/">"PSR-4"</a> standard. The details of that standard are not that important right now. Basically it says: "inside this directory, all namespaces are represented by sub directories and classes are <code>&lt;ClassName&gt;.php</code> files."</p>

<p><em><strong>Autoloading</strong> is PHP's way to automatically find classes and their corresponding files without having to <code>require</code> all of them manually. You can read more about it <a href="http://php.net/manual/en/language.oop5.autoload.php">here</a>. Autoloading is also one of the reasons why PHP code is usually organized in classes because PHP only supports autoloading for classes, not simple functions for example.</em></p>

<p>The only thing we still need to do is to add Composer's autoloading to our application <a href="https://xmartin.github.io/php-introduction/chapters/a_web_application">like we already did in our Silex examples</a>:</p>

<pre><code class="php">&lt;?php

require "vendor/autoload.php";
</code></pre>

<p>This should be right on top of your main application file to make sure, all classes can be found right from the beginning. It loads a PHP file that Composer created automatically (<code>vendor/autoload.php</code>). This file loads Composer's autoloading logic into our project. After that all third party namespaces from our dependencies as well as our own are avaliable in our code.</p>

<h3 id="using-namespaces">Using Namespaces</h3>

<p>To use something from a different namespace we have to <code>use</code> it:</p>

<pre><code class="php"><br />&lt;?php

&lt;?php
//file name: app.php

use MyProject\Foo;

$d = new Derp();
</code></pre>

<p><code>use</code> pulls in another namespace into the current scope and makes everything in that namespace available. It also serves as a kind of documentation about what other classes a particular PHP file will require so it's good to have all <code>use</code> statements well organized at the top of our PHP files.</p>
                    </div>

                </div>
                <div class="row">
                    <div class="small-12 columns">
                        <hr>
                                                                                                                                            
<div class="row">
    <div class="small-4 columns text-left">
                    <a href="https://xmartin.github.io/php-introduction/chapters/inheritance/">Previous</a>
            </div>
    <div class="small-4 columns text-center">
        <a href="https://xmartin.github.io/php-introduction/">Index</a>
    </div>
    <div class="small-4 columns text-right">
                    <a href="https://xmartin.github.io/php-introduction/chapters/all_of_it/">Next</a>
            </div>
</div>
                    </div>
                </div>
            </section>

                <div class="row">
                    <div class="small-12 columns">
                        <footer class="main-footer">
                            <nav><ul class="inline-list">
                                    <li><a href="http://www.lnwdr.de">Author: Leon Weidauer</a></li>
                                    <li>
                                        <a href="https://www.github.com/berlinonline/php-introduction">PHP Introduction on Github</a>
                                    </li>
                                    <li>
                                        <a href="http://www.berlinonline.net">BerlinOnline Stadtportal GmbH & Co. KG</a>
                                    </li>
                            </ul></nav>
                        </footer>
                </div>
                <a class="exit-off-canvas"></a>
            </div>
        </div>

                <script src="https://xmartin.github.io/php-introduction//components/jquery/jquery.min.js"></script>
        <script src="https://xmartin.github.io/php-introduction//components/foundation/js/foundation.min.js"></script>
        <script>
            $(document).foundation();
        </script>
        <script src="https://xmartin.github.io/php-introduction//components/highlightjs/highlight.pack.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
            </body>
</html>

